{
    "collab_server" : "",
    "contents" : "# --------------------------------------------------------------------------- #\n# --------------------------------------------------------------------------- #\n\nheight = 6\nwidth = 12\n# --------------------------------------------------------------------------- #\n## --\nggplot(w, aes(x = Tid, y = Value, color = Hojde)) + geom_line() + facet_grid(Var ~ ., scales = \"free_y\")\nggsave(\"figs/ts_ws_wd_hojde.png\", height = height, width = width)\n\n## --\nggplot(w, aes(x = Tid, y = Value, color = Hojde)) + geom_line() + facet_grid(Var ~ Site, scales = \"free_y\")\nggsave(\"figs/ts_ws_wd_hojde_site.png\", height = height, width = width)\n\n# --------------------------------------------------------------------------- #\nggplot(wmean, aes(x = Tid, y = Value, color = Site)) + geom_line() + facet_grid(Var ~ ., scales = \"free_y\")\nggsave(\"figs/ts_ws_wd_avg.png\", height = height, width = width)\n\n# --------------------------------------------------------------------------- #\n# Dataanalyse - auto-korrelation\n\npng(\"figs/acf.png\", width = 10, height = 10, units = \"cm\", res = 300)\nlayout(matrix(c(1, 2, 3, 4, 5, 5), 3, 2, byrow = TRUE))\npar(mar = c(2,2,1,1), oma = c(1,1,1,1))\nacf(w2$Husahagi, lag.max = 15)\nacf(w2$Suduroy, lag.max = 15)\npacf(w2$Husahagi, lag.max = 15)\npacf(w2$Suduroy, lag.max = 15)\nccf(w2$Husahagi, w2$Suduroy, lag.max = 30)\ndev.off()\n\n# --------------------------------------------------------------------------- #\nggplot(w_corall %>% filter(ws_niv == \"Alle\"), aes(x = reorder(factor(wd_niv), wd_num), y = cor)) + ylim(c(0, 1)) + \n  geom_bar(stat = \"identity\", position = \"dodge\", color = \"black\", fill = \"grey\", alpha = 1) +\n  labs(x = \"Vindretning\", y = \"Korrelation\") + scale_fill_manual(values = c(\"grey\")) + \n  geom_text(aes(y = cor + .05, label = paste0(round(p*100), \"%\"), hjust = 0))\nggsave(\"figs/korrelation_vretning.png\", width = 6, height = 5)\n\n## --\nggplot(w_corall, aes(x = reorder(factor(wd_niv), wd_num), y = cor, fill = factor(ws_num))) + ylim(c(0, 1)) + \n  geom_bar(stat = \"identity\", position = \"dodge\", color = \"black\") +\n  labs(fill = \"Vindhastighed\", x = \"Vindretning\", y = \"Korrelation\") +\n  scale_fill_manual(values = c(\"grey\",\"blue\",\"purple\",\"red\"), labels = c(\"Alle\",\"0-10 m/s\", \"10-20 m/s\", \"+20 m/s\")) +\n  geom_text(aes(y = cor+.02, label = paste0(round(p*100), \"%\"), hjust = 0.3, vjust = 0), position=position_dodge(width=0.9))\nggsave(\"figs/korrelation_vretning_vhastighed.png\", width = 8, height = 5)\n\n# --------------------------------------------------------------------------- #\nggplot(wp_corall %>% filter(ws_niv == \"Alle\"), aes(x = reorder(factor(wd_niv), wd_num), y = cor)) + ylim(c(0, 1)) + \n  geom_bar(stat = \"identity\", position = \"dodge\", color = \"black\", fill = \"grey\", alpha = 1) +\n  labs(x = \"Vindretning\", y = \"Korrelation\") + scale_fill_manual(values = c(\"grey\")) + \n  geom_text(aes(y = cor + .05, label = paste0(round(p*100), \"%\"), hjust = 0))\nggsave(\"figs/korrelation_wp_vretning.png\", width = 6, height = 5)\n\n## --\nggplot(wp_corall, aes(x = reorder(factor(wd_niv), wd_num), y = cor, fill = factor(ws_num))) + ylim(c(NA, 1)) + \n  geom_bar(stat = \"identity\", position = \"dodge\", color = \"black\") +\n  labs(fill = \"Vindhastighed\", x = \"Vindretning\", y = \"Korrelation\") +\n  scale_fill_manual(values = c(\"grey\",\"blue\",\"purple\",\"red\"), labels = c(\"Alle\",\"0-10 m/s\", \"10-20 m/s\", \"+20 m/s\")) +\n  geom_text(aes(y = cor+.02, label = paste0(round(p*100), \"%\"), hjust = 0.3, vjust = 0), position=position_dodge(width=0.9))\nggsave(\"figs/korrelation_wp_vretning_vhastighed.png\", width = 8, height = 5)\n\n# --------------------------------------------------------------------------- #\nggplot(wpr_corall %>% filter(ws_niv == \"Alle\"), aes(x = reorder(factor(wd_niv), wd_num), y = cor)) + ylim(c(0, 1)) + \n  geom_bar(stat = \"identity\", position = \"dodge\", color = \"black\", fill = \"grey\", alpha = 1) +\n  labs(x = \"Vindretning\", y = \"Korrelation\") + scale_fill_manual(values = c(\"grey\")) + \n  geom_text(aes(y = cor + .05, label = paste0(round(p*100), \"%\"), hjust = 0))\nggsave(\"figs/korrelation_wpr_vretning.png\", width = 6, height = 5)\n\n## --\nggplot(wpr_corall, aes(x = reorder(factor(wd_niv), wd_num), y = cor, fill = factor(ws_num))) + ylim(c(NA, 1)) + \n  geom_bar(stat = \"identity\", position = \"dodge\", color = \"black\") +\n  labs(fill = \"Vindhastighed\", x = \"Vindretning\", y = \"Korrelation\") +\n  scale_fill_manual(values = c(\"grey\",\"blue\",\"purple\",\"red\"), labels = c(\"Alle\",\"0-10 m/s\", \"10-20 m/s\", \"+20 m/s\")) +\n  geom_text(aes(y = cor+.02, label = paste0(round(p*100), \"%\"), hjust = 0.3, vjust = 0), position=position_dodge(width=0.9))\nggsave(\"figs/korrelation_wpr_vretning_vhastighed.png\", width = 8, height = 5)\n\n# --------------------------------------------------------------------------- #\nggplot(corall %>% filter(ws_niv == \"Alle\"), aes(x = reorder(factor(wd_niv), wd_num), y = cor, fill = factor(Data))) + ylim(c(0, 1)) + \n  geom_bar(stat = \"identity\", position = \"dodge\", color = \"black\", alpha = 1) +\n  labs(x = \"Vindretning\", y = \"Korrelation\", fill = \"Data\") + \n  scale_fill_manual(values = c(grey(.8), grey(.5), grey(.2)), labels = c(\"Vinddata\", \"Effektkurve 1\", \"Effektkurve 2\"))# + \nggsave(\"figs/korrelation_vhast_vpower.png\", width = 7, height = 5)\n\n## --\nggplot(corall %>% filter(ws_niv == \"Alle\"), aes(x = reorder(factor(wd_niv), wd_num), y = fejl, fill = factor(Data))) + \n  geom_bar(stat = \"identity\", position = \"dodge\", color = \"black\", alpha = 1) +\n  labs(x = \"Vindretning\", y = \"Fejl (avg)\", fill = \"Data\") + \n  scale_fill_manual(values = c(grey(.8), grey(.5), grey(.2)), labels = c(\"Vinddata\", \"Effektkurve 1\", \"Effektkurve 2\")) +\n  theme(legend.position = \"none\")\nggsave(\"figs/fejl_vhast_vpower.png\", width = 6, height = 5)\n\n##--\nggplot(corall %>% filter(ws_niv == \"Alle\"), aes(x = reorder(factor(wd_niv), wd_num), y = fejl_p, fill = factor(Data))) + \n  geom_bar(stat = \"identity\", position = \"dodge\", color = \"black\", alpha = 1) +\n  labs(x = \"Vindretning\", y = \"Fejl (%)\", fill = \"Data\") + \n  scale_fill_manual(values = c(grey(.8), grey(.5), grey(.2)), labels = c(\"Vinddata\", \"Effektkurve 1\", \"Effektkurve 2\")) +\n  theme(legend.position = \"none\")\nggsave(\"figs/fejl_p_vhast_vpower.png\", width = 6, height = 5)\n\n# --------------------------------------------------------------------------- #\n# Plot effektkurver\n## --\npng(\"figs/powerkurve.png\", width = 12, height = 10, units = \"cm\", res = 300)\npar(mar = c(2,0,0,0) + .5, oma = rep(0, 4))\nplot(y$ws, y$np, col = \"grey\", axes = F, ann = F, pch = \"*\")\nxval <- seq(0, 40, 0.1)\nyfit <- myfun(p = opar, x = xval, p0 = F)\nlines(xval, yfit, col = \"red\", lwd = 2)\naxis(1)\ndev.off()\n\n## --\npng(\"figs/powerkurve1.png\", width = 12, height = 10, units = \"cm\", res = 300)\npar(mar = c(2,0,0,0) + .5, oma = rep(0, 4))\nplot(y$ws, y$np, col = \"grey\", axes = F, ann = F, pch = \"*\")\naxis(1)\nlines(xval, yfit, col = \"black\")\napply(spypar, 1, function(op, xval) {\n  yf <- myfun(p = op, x = xval, p0 = F)\n  lines(xval, yf, col = \"red\", lwd = 2)\n}, xval = xval)\ndev.off()\n\n# --------------------------------------------------------------------------- #\n# --------------------------------------------------------------------------- #\n",
    "created" : 1477043447002.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1619015443",
    "id" : "313CD8D7",
    "lastKnownWriteTime" : 1477476649,
    "last_content_update" : 1477476649314,
    "path" : "G:/ELT/R/SEV/Suduroy/figs/Figures.R",
    "project_path" : "figs/Figures.R",
    "properties" : {
        "source_window_id" : "ws48eigpvy7x2"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}